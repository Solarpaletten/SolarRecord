generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Recording {
  id                 String    @id @default(uuid()) @db.Uuid
  filename           String    @db.VarChar(255)
  webmPath           String    @map("webm_path")
  mp4Path            String?   @map("mp4_path")
  transcriptPath     String?   @map("transcript_path")
  subtitlesPath      String?   @map("subtitles_path")
  fileSizeBytes      BigInt?   @map("file_size_bytes")
  durationSeconds    Int?      @map("duration_seconds")
  language           String?   @db.VarChar(10)
  languageConfidence Float?    @map("language_confidence")
  status             String    @default("uploaded") @db.VarChar(50)
  processingStep     String?   @map("processing_step") @db.VarChar(100)
  processingMessage  String?   @map("processing_message")
  translated         Boolean   @default(false)
  synced             Boolean   @default(false)
  errorStep          String?   @map("error_step")
  errorMessage       String?   @map("error_message")
  errorAt            DateTime? @map("error_at") @db.Timestamptz(6)
  createdAt          DateTime  @default(now()) @map("created_at") @db.Timestamptz(6)
  updatedAt          DateTime  @default(now()) @updatedAt @map("updated_at") @db.Timestamptz(6)

  @@index([createdAt])
  @@index([status])
  @@map("recordings")
}
